/* ============================================
   MODERN CALENDAR STYLES - Enhanced & Polished
   ============================================ */

/* ===========================================
   CALENDAR CONTAINER & LAYOUT
   =========================================== */
.modern-calendar {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
    sans-serif;
}

.rbc-calendar {
  min-height: 600px !important;
}

/* ===========================================
   TOOLBAR - Navigation & Controls
   =========================================== */
.rbc-toolbar {
  @apply flex flex-wrap gap-2.5 md:gap-3 mb-4 items-center justify-between px-2 md:px-3 py-2.5;
}

.rbc-toolbar-label {
  text-transform: none !important;
  font-weight: 600 !important;
  @apply text-lg md:text-xl text-gray-800 dark:text-gray-100 tracking-normal;
  letter-spacing: 0;
}

/* Button Groups */
.rbc-btn-group {
  @apply flex gap-0.5;
}

.rbc-btn-group > button {
  @apply px-2 md:px-3 py-1 rounded-md font-medium transition-all 
    border-2 border-gray-100 dark:border-gray-700 
    text-gray-700 dark:text-gray-300
    hover:bg-gray-50 hover:text-gray-900 hover:border-gray-200
    dark:hover:bg-slate-800/60 dark:hover:text-gray-100 dark:hover:border-gray-600
    focus:outline-none focus:ring-1 focus:ring-emerald-400 focus:ring-offset-0;
}

.rbc-btn-group > button:active {
  @apply transform scale-95 dark:!bg-emerald-700 dark:!border-emerald-700 dark:!text-emerald-50;
}

.rbc-active {
  /* Keep strong emerald background in light mode with white text */
  @apply !bg-emerald-600 !text-white !border-emerald-600
    /* In dark mode use a slightly darker emerald and an off-white text color for better contrast */
    dark:!bg-emerald-700 dark:!border-emerald-700 dark:!text-emerald-50
    shadow-sm;
}

/* Today Button Special Styling */
.rbc-toolbar button:first-child {
  @apply font-semibold;
}

/* ===========================================
   MONTH VIEW
   =========================================== */
.rbc-month-view {
  @apply border-0 rounded-lg overflow-visible;
}

/* Calendar Headers (Day Names) */
.rbc-header {
  @apply border-b border-gray-200 dark:border-gray-700 
    bg-gradient-to-b from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-800/80
    py-3  px-2
    text-xs md:text-sm font-bold uppercase tracking-wider
    text-gray-700 dark:text-gray-300;
}

.rbc-header + .rbc-header {
  @apply border-l border-gray-200 dark:border-gray-700;
}

/* Month Rows */
.rbc-month-row {
  @apply border-b border-gray-100 dark:border-gray-700/50;
}

/* Day Cells */
.rbc-day-bg {
  @apply border-r border-gray-100 dark:border-gray-700/50
    transition-colors duration-200
    hover:bg-gray-50 dark:hover:bg-slate-800/50;
}

.rbc-day-bg:last-child {
  @apply border-r-0;
}

/* Off-Range Days (Days from other months) */
.rbc-off-range-bg {
  @apply bg-gray-50/50 dark:bg-slate-900/80;
}

.rbc-off-range {
  @apply text-gray-400 dark:text-gray-600;
}

/* Today Highlight */
.rbc-today {
  @apply !bg-gradient-to-br !from-emerald-50 !to-green-50 
    /* Dark mode: make the today background noticeably darker/more opaque so it reads better against dark pages */
    dark:!from-emerald-950 dark:!to-green-950
    relative;
}

.rbc-today::before {
  content: '';
  @apply absolute inset-0 border border-emerald-400 dark:border-emerald-700 rounded pointer-events-none;
}

/* Date Numbers */
.rbc-date-cell {
  @apply p-1 md:p-2 text-right -mb-2.5;
}

.rbc-date-cell > a {
  @apply text-xs md:text-sm font-semibold text-gray-700 dark:text-gray-300
    hover:text-emerald-600 dark:hover:text-emerald-400
    transition-colors duration-200;
}

.rbc-now .rbc-date-cell > a {
  @apply text-emerald-700 dark:text-emerald-400 font-bold;
}

/* ===========================================
   EVENTS - Activity Items
   =========================================== */
.rbc-event {
  @apply transition-all duration-200 hover:scale-[1.02] hover:shadow-md hover:z-10 py-0.5 px-1 rounded-md
    cursor-pointer !important;
}

.rbc-event:focus {
  @apply outline-none ring-2 ring-white ring-offset-2 ring-offset-emerald-500;
}

/* Event Content */
.rbc-event-content {
  @apply text-xs md:text-sm font-medium truncate;
}

.rbc-event-label {
  @apply text-xs font-semibold opacity-90;
}

/* Show More Link */
.rbc-show-more {
  @apply text-xs font-semibold text-emerald-600 dark:text-emerald-400
    hover:text-emerald-700 dark:hover:text-emerald-300
     transition-colors duration-200
    bg-white dark:bg-slate-800 !p-1 w-full text-start !rounded-md;
}

/* Popup Overlay */
.rbc-overlay {
  @apply bg-white dark:bg-slate-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-50;
}

.rbc-overlay-header {
  @apply bg-gray-50 dark:bg-slate-700 px-4 py-3 border-b border-gray-200 dark:border-gray-600 rounded-t-lg;
  font-weight: 600;
  font-size: 14px;
  color: rgb(55 65 81); /* gray-700 */
}

.dark .rbc-overlay-header {
  color: rgb(209 213 219); /* gray-300 */
}

.rbc-event.rbc-event-popup {
  @apply px-4 py-2 border-b border-gray-100 dark:border-gray-600 last:border-b-0
    hover:bg-gray-50 dark:hover:bg-slate-700 cursor-pointer transition-colors;
}

.rbc-event-popup .rbc-event-content {
  @apply text-sm font-medium;
}

/* ===========================================
   WEEK & DAY VIEWS
   =========================================== */
.rbc-time-view {
  @apply border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden;
}

/* Time Gutter (Hour Labels) */
.rbc-time-gutter {
  @apply bg-gradient-to-b from-gray-50 to-gray-100 dark:from-slate-800 dark:to-slate-800/80;
}

.rbc-time-slot {
  @apply text-xs md:text-sm text-gray-600 dark:text-gray-400;
}

/* Time Grid */
.rbc-timeslot-group {
  @apply border-b border-gray-100 dark:border-gray-700/50;
}

.rbc-time-content {
  @apply border-t border-gray-200 dark:border-gray-700;
}

.rbc-time-column {
  @apply border-l border-gray-100 dark:border-gray-700/50;
}

/* Current Time Indicator */
.rbc-current-time-indicator {
  @apply !bg-red-500 dark:!bg-red-600;
  height: 2px !important;
}

.rbc-current-time-indicator::before {
  content: '';
  @apply absolute w-3 h-3 rounded-full bg-red-500 dark:bg-red-600 -left-1.5 -top-1.5;
}

/* ===========================================
   AGENDA VIEW
   =========================================== */
.rbc-agenda-view {
  @apply border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden;
}

.rbc-agenda-table {
  @apply w-full;
}

.rbc-agenda-date-cell,
.rbc-agenda-time-cell {
  @apply text-sm text-gray-600 dark:text-gray-400 p-3 md:p-4;
}

.rbc-agenda-event-cell {
  @apply text-sm text-gray-900 dark:text-gray-100 p-3 md:p-4;
}

/* ===========================================
   RESPONSIVE - Mobile Optimizations
   =========================================== */
@media (max-width: 768px) {
  .rbc-toolbar {
    @apply flex-col gap-3 mb-4;
  }

  .rbc-toolbar-label {
    @apply text-lg;
  }

  .rbc-btn-group {
    @apply w-full justify-center;
  }

  .rbc-btn-group > button {
    @apply flex-1 px-2 py-1.5 text-xs;
  }

  .rbc-header {
    @apply py-2 text-xs;
  }

  .rbc-event {
    @apply text-xs;
  }

  .rbc-event-content {
    @apply text-xs;
  }

  .rbc-date-cell {
    @apply p-1;
  }

  .rbc-date-cell > a {
    @apply text-xs;
  }

  /* Touch-friendly event spacing on mobile */
  .rbc-event {
    @apply mb-1;
  }
}

/* Extra small devices */
@media (max-width: 640px) {
  .rbc-calendar {
    min-height: 500px !important;
  }

  .rbc-toolbar-label {
    @apply text-base;
  }

  .rbc-header {
    @apply text-[10px] py-2;
  }
}

/* ===========================================
   ACCESSIBILITY & INTERACTIONS
   =========================================== */
.rbc-button-link {
  @apply transition-all duration-200 rounded-full p-2
    hover:bg-emerald-100 dark:hover:bg-emerald-900/50
    focus:outline-none focus:ring-2 focus:ring-emerald-500;
}

/* ===========================================
   ANIMATIONS & TRANSITIONS
   =========================================== */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.rbc-event {
  animation: fadeIn 0.2s ease-out;
}

/* Smooth scrolling for time views */
.rbc-time-content {
  @apply scroll-smooth;
}

/* ===========================================
   DARK MODE ENHANCEMENTS
   =========================================== */
.dark .rbc-calendar {
  @apply text-gray-100;
}

.dark .rbc-time-slot {
  @apply text-gray-400;
}

/* ===========================================
   CUSTOM STYLES FOR EVENT WRAPPER
   =========================================== */
.event-wrapper {
  @apply relative;
}

.event-wrapper:hover {
  @apply z-10;
}

/* Loading State */
.calendar-container.loading {
  @apply opacity-50 pointer-events-none;
}
